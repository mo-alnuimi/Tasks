<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=, initial-scale=1.0"> -->
    <!-- <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Tajawal:wght@200;300;400;500;700;800&family=Work+Sans:ital,wght@0,200;0,600;0,800;1,300;1,400&display=swap" rel="stylesheet"> -->
    <title>Tasks</title>
    <link rel="stylesheet" href="css/all.min.css">
    <style>
        body{
            font-family: 'Open Sans', sans-serif;
            font-family: 'Tajawal', sans-serif;
            font-family: 'Work Sans', sans-serif;
	    font-size: 22px;
        }
        .tasks-table{
            width: calc(100% - 20px);
            background-color: rgb(220, 224, 211);
            margin-top: 330px;
	    height:300px;
        }
        .circular{
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            font-weight: bold;
            line-height: 0;
        }
        .task{
            display: flex;
            background-color: white;
            padding: 0px;
            border-bottom: 1px solid rgb(143, 138, 138);
            transition:0.3s;
            margin-top: 5px;
        }
        .done{
            background-color: rgb(158, 253, 160);
        }
        .task:hover{
            box-shadow: 8px 3px 15px rgba(97, 97, 97, 0.843);
        }
    </style>
</head>
<body style="background-color: rgb(30, 0, 77);">
    <div style="direction: rtl;">
        <div>
            <!-- center div-->

            <div style="display: flex;justify-content: center;align-items: center;">

                <!-- tasks table-->
                <div class="tasks-table" >
                    <!--header-->
                    <div style="width: 100%;text-align: center; background-color: rgb(92, 52, 155);color: white;padding:8px 0;">
                        <h1 style="display: inline-block;margin: 0;">مهامي</h1>
                        <button id="add-btn" class="circular" style="float: right;background-color: white;margin-right:10px;cursor: pointer;outline: none;"> 
                            <i class="fa fa-add fa-2x"></i>                           
                        </button>
                    </div>
                    <!--header-->

                    <!--tasks-->
                    <div id="tasks" style="padding: 20px;height:200px;overflow-y: scroll;">

                        <!--tasks-->
                        <div class="task">

                            <!--tasks info-->
                            <div style="width: 70%;padding:5px 10px; ">
                                <h2 style="margin: 0;padding-top: 3px;">red the book</h2>
                                <div style="padding: 0;margin: 0;">
                                    <i class="fa fa-credit-card" aria-hidden="true"></i>
                                    <span>10/10/2023</span>
                                </div>
                            </div>
                            <!--//tasks info//-->  

                            <!--tasks action-->
                            <div style="display: flex;justify-content: space-around;align-items: center;width:20%;">
                                <button class="circular" style="float:right;background-color: rgb(114, 0, 0);margin-right:10px;cursor: pointer;outline: none; color: white;"><i class="fa fa-trash" aria-hidden="true"></i></i></button>
                                <button class="circular" style="float:right;background-color: rgb(0, 150, 30);margin-right:10px;cursor: pointer;outline: none; color: white;"><i class="fa fa-check" aria-hidden="true"></i></button>
                                <button class="circular" style="float:right;background-color: rgb(0, 16, 197);margin-right:10px;cursor: pointer;outline: none; color: white;"><i class="fa fa-pencil" aria-hidden="true"></i></button>

                            </div>
                            <!--//tasks action//--> 
                        </div>
                        <!--//tasks//-->

                        <!--tasks-->
                        <div class="task">

                            <!--tasks info-->
                            <div style="width: 70%;padding:5px 10px; ">
                                <h2 style="margin: 0;padding-top: 3px;">red the book</h2>
                                <div style="padding: 0;margin: 0;">
                                    <span class="material-symbols-outlined">tab_recent</span>
                                    <span>10/10/2023</span>
                                </div>
                            </div>
                            <!--//tasks info//-->  

                            <!--tasks action-->
                            <div style="display: flex;justify-content: space-around;align-items: center;width:20%;">
                                <button class="circular" style="float:right;background-color: rgb(114, 0, 0);margin-right:10px;cursor: pointer;outline: none; color: white;"><span class="material-symbols">delete</span></button>
                                <button class="circular" style="float:right;background-color: rgb(0, 150, 30);margin-right:10px;cursor: pointer;outline: none; color: white;"><span class="material-symbols-outlined">check</span></button>
                                <button class="circular" style="float:right;background-color: rgb(0, 16, 197);margin-right:10px;cursor: pointer;outline: none; color: white;"><span class="material-symbols-outlined">edit</span></button>

                            </div>
                            <!--//tasks action//--> 
                        </div>
                        <!--//tasks//-->

                    </div>
                    <!--//tasks//-->

                </div>
            <!-- //tasks table//-->

            </div>

            <!-- //center div//-->

        </div>
    </div>
</body>
<script>

    let tasks=[
        {
            "title":"red book",
            "date":"12/3/2020",
            "isDone":false
        },
        {
            "title":"done projeckt ",
            "date":"2/8/2020",
            "isDone":false
        },
        {
            "title":"end corss ",
            "date":"10/10/2020",
            "isDone":false
        },
        {
            "title":"soltion work ",
            "date":"9/12/2030",
            "isDone":false
        }
    ]

    function getTasksLocalstorage(){
    
    let retTasks=JSON.parse(localStorage.getItem("tasks"))
    // tasks= retTasks ?? []
    if(retTasks== null){
        tasks=[]
    }else{
        tasks=retTasks
    }
    
    }

    getTasksLocalstorage()

    function fillTasks(){

        document.getElementById("tasks").innerHTML=""

        index=0
        for(task of tasks){
            let content=
            `
                <div class="task ${task.isDone?'done':''}">

                    <!--tasks info-->
                    <div style="width: 70%;padding:5px 10px; ">
                        <h2 style="margin: 0;padding-top: 3px;">${task.title}</h2>

                        <div style="padding: 0;margin: 0;">
                            <i class="fa fa-credit-card" aria-hidden="true"></i>
                            <span>
                                ${task.date}
                            </span>
                        </div>
                    </div>
                    <!--//tasks info//-->  

                    <!--tasks action-->
                    <div style="display: flex;justify-content: space-around;align-items: center;width:20%;">
                        <button onclick="deleteTask(${index})" class="circular" style="float:right;background-color: rgb(114, 0, 0);margin-right:10px;cursor: pointer;outline: none; color: white;"><i class="fa fa-trash" aria-hidden="true"></i></i></button>
                        <button onclick="toggleTask(${index})" class="circular" style=" transition:0.3s; float:right;background-color:${task.isDone?'rgb(150, 0, 0)':'rgb(0, 150, 30)'} ;margin-right:10px;cursor: pointer;outline: none; color: white;"><i class="fa fa-${task.isDone?'close':'check'}" aria-hidden="true"></i></button>
                        <button onclick="editTask(${index})" class="circular" style="float:right;background-color: rgb(0, 16, 197);margin-right:10px;cursor: pointer;outline: none; color: white;"><i class="fa fa-pencil" aria-hidden="true"></i></button>

                    </div>
                    <!--//tasks action//--> 
                </div>
            `
            document.getElementById("tasks").innerHTML+=content
            index++

        }
    }

    fillTasks()

  
    document.getElementById("add-btn").addEventListener("click",function(){
            console.log()
            let taskName =prompt("الرجاء ادخال عنوان المهمه")

            let now=new Date()

            let date= now.getDate()+"/"+(now.getMonth()+1)+"/"+now.getFullYear();
            let taskOpj={
                "title":taskName,
                "date":date,
                "isDone":false
            }
            tasks.push(taskOpj)
            storageTasks()
            fillTasks()
        })

        function deleteTask(index){
            let x=confirm("هل تريد حذف :"+tasks[index].title)
            if(x){
            tasks.splice(index,1)
            storageTasks()
            fillTasks()
                }
        }

        function editTask(index){
            let taskName =prompt("ادخل القيمة الجديده :",tasks[index].title)
            let task=tasks[index]
            task.title=taskName
            storageTasks()
            fillTasks()
                
        }
        function toggleTask(index){
            let task=tasks[index]
            task.isDone=!task.isDone
            storageTasks()
            fillTasks()
        }

        //**************funvtions**********//
        function storageTasks(){
            let stringTasks= JSON.stringify(tasks)
            localStorage.setItem("tasks",stringTasks)
        }
</script>
</html>